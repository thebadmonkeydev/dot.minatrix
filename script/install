#!/bin/bash
#
# Run package installation and all topic installers.

if [ -z ${DOTFILES+x} ];then
  export DOTFILES=~/dot.minatrix
fi

source $DOTFILES/script/helpers

ensure-sudo

cd "$(dirname $0)"/..

# load default packages
source packages.bash

# begin install
for ppa in "${ppalist[@]}"; do
  inf "Adding custom PPA: ppa:$ppa"
  add-apt-repository "ppa:$ppa" -y
done
apt update

inf "Installing core packages"
apt install ${packagelist[@]}

# find the installers and run them iteratively
shopt -s extglob
for file in ./!(script)/install; do
  [ -f "$file" ] && [ -x "$file" ] && $file
done
